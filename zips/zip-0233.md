```
ZIP: 233
Title: Establish the Zcash Sustainability Fund on the Protocol Level
Owners: Jason McGee <jason@shieldedlabs.com>
        Mark Henderson <mark@equilibrium.co>
        Tomek Piotrowski <tomek@eiger.co>
        Mariusz Pilarek <mariusz@eiger.co>
        Paul Dann <paul@eiger.co>
Original-Authors: Nathan Wilcox
Credits:
Status: Draft
Category: Consensus / Ecosystem
Created: 2023-08-16
License: BSD-2-Clause
```

# Terminology

The key words "MUST", "SHOULD", "SHOULD NOT", "MAY", "RECOMMENDED", "OPTIONAL",
and "REQUIRED" in this document are to be interpreted as described in RFC 2119.
[1]

The term "network upgrade" in this document is to be interpreted as described in
ZIP 200. [2]

"Block Subsidy‚Äù - the algorithmic issuance of ZEC on block creation. Part of the
consensus rules. Split between the miner and the Dev Fund. Also known as Block
Reward.

"Issuance" - The method by which ZEC becomes available for circulation on the
network.

"We" - the ZIP Owners and Authors, listed in the above front matter.

"`MAX_MONEY`" is the total ZEC supply cap, defined as 21,000,000 ZEC. This is
slightly larger than the supply cap for the current issuance mechanism, but is
the value used in existing critical consensus checks.

# Abstract

We propose defining the Zcash Sustainability Fund (ZSF) as: `MAX_MONEY -
ChainValue`, where `ChainValue` includes all ZEC available on the network,
across all value pools.

This definition is intended to support future mechanisms to strengthen the
long-term sustainability of the network. We anticipate that this will lay
important groundwork for future economic upgrades, such as a transition to Proof
of Stake or Zcash Shielded Assets, and other potential protocol fees and user
applications.

In addition, we propose a new transaction field, which would require the
introduction of a network upgrade. This field is required to support a mechanism
for depositing existing ZEC into the ZSF. From the perspective of network users,
this operation would be similar in concept to the idea of "burning" ZEC, except
that removing ZEC from circulation increases the value of the ZSF by definition.
Methods to make use of these deposited funds will be proposed in future ZIPs.

While wallet developers would be encouraged to add support for ZSF deposits
to their UIs, no changes or new behavior are required for developers or ZEC
holders.

# Motivation

1. **Long Term Consensus Sustainability:** This mechanism seeks to address
   concerns about the sustainability of the network design shared by
   Bitcoin-like systems through the establishment of deposits into the
   Sustainability Fund to augment block rewards, ensuring long-term
   sustainability as the issuance rate of Zcash drops and newly issued ZEC
   decreases over time.
2. **Benefits to ZEC Holders:** Deposits to the ZSF slow down the payout of
   ZEC, temporarily reducing its available supply, benefiting current holders
   of unencumbered active ZEC in proportion to their holdings without requiring
   them to opt into any scheme, introducing extra risk, active oversight, or
   accounting complexity.
3. **Recovery of "Soft-Burned" Funds:** In some instances, such as miners not
   claiming all available rewards, some ZEC goes unaccounted for, though not
   formally burned. This proposal would recover this unclaimed value, as it is
   already part of the ZSF if the proposed definition of the ZSF is adopted.

# Specification

The modifications required are:

1. A mechanism to calculate the current balance of the ZSF.
2. The addition of a transaction field representing an amount to deposit into
   the ZSF.
3. The inclusion of the ZSF deposit in the calculated total output value for a
   given transaction.

## Current ZSF Balance

This calculation simply involves summing all active value pools, and subtracting
this total from `MAX_MONEY'.

## Deposits into the ZSF

We add a new field to the common transaction fields [3]:

    zsfDeposit : uint64 [zatoshi]

This field specifies how much of the input value for the transaction should be
deposited in the ZSF.

**Note:** Older transaction versions can continue to be supported after a
network upgrade, but ZSF deposits are not possible for these transactions. For
example, NU5 supports both v4 and v5 transaction formats, for both coinbase and
non-coinbase transactions.

## Consensus Rule Changes

ZSF deposits must now be considered when calculating the total output value of a
transaction. They should be treated similarly to a transparent output.

## Transaction Format Requirements

* ZIP 230 [3] must be updated to include the new `zsfDeposit` field.
* ZIP 244 [4] must be updated as well to include the new `zsfDeposit` field.

# Rationale

All technical decisions in this ZIP are balanced between the necessary
robustness of the ZSF mechanics, and simplicity of implementation.

## New transaction field for ZSF deposit

An explicit value distinguishes the ZEC destined to Sustainability Fund
deposits from the implicit transaction fee. Explicitness also ensures any
arithmetic flaws in any implementations are more likely to be observed and
caught immediately.

# Deployment

This ZIP is proposed to activate with Network Upgrade 7.

# References

**[1]: [Key words for use in RFCs to Indicate Requirement
Levels](https://www.rfc-editor.org/rfc/rfc2119.html)**

**[2]: [ZIP 200: Network Upgrade Mechanism](zip-0200.rst)**

**[3]: [ZIP 230: Version 6 Transaction Format](zip-0230.rst)**

**[4]: [ZIP 244: Transaction Identifier Non-Malleability](zip-0244.rst)**
