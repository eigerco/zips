<p><code>ZIP: 
Title: Deposit 60% of transaction fees to the Zcash Sustainability Fund
Owners: Jason McGee &lt;jason@shieldedlabs.com&gt;
        Mark Henderson &lt;mark@equilibrium.co&gt;
        Tomek Piotrowski &lt;tomek@eiger.co&gt;
        Mariusz Pilarek &lt;mariusz@eiger.co&gt;
Original-Authors: Nathan Wilcox
Credits:
Status: Draft
Category: Ecosystem
Created: 2023-09-21
License: BSD-2-Clause</code></p>
<h1>Terminology</h1>
<p>The key words “MUST”, “SHOULD”, “SHOULD NOT”, “MAY”, “RECOMMENDED”, “OPTIONAL”, and “REQUIRED” in this document are to be interpreted as described in RFC 2119. [1]</p>
<p>The term “network upgrade” in this document is to be interpreted as described in ZIP 200. [2]</p>
<p>The term “Block Rewards” in this document is to be interpreted as described in ZIP TBD [3]</p>
<p>The term “Issuance” in this document is to be interpreted as described in ZIP TBD [3]</p>
<p>“We” - the ZIP authors, owners listed in the above front matter</p>
<p>“<code>ZSF_BALANCE_AFTER[h]</code>” is balance of the Zcash Sustainability Fund as defined in ZIP ###</p>
<h1>Abstract</h1>
<p>This ZIP proposes a modification to transaction fees, diverting 60% of transaction fees back into the <code>ZSF_BALANCE_AFTER[h]</code>, while  the destination of the remaining 40% is unchanged and goes to the block miner. This proposal effectively “unmints” a portion of transaction fees, contributing to a deflationary effect and offering long-term support for the Zcash network.</p>
<p>This ZIP attempts to establish a symbiotic relationship between miner incentives and sustained network growth. It achieves this by splitting transaction fees: 40% goes directly to miners, incentivizing them to include transactions, while the remaining 60% is deposited into the  <code>ZSF_BALANCE_AFTER[h]</code>. This approach mitigates a "bootstrapping problem", a problem that arises when 100% of transaction fees go to the ZSF and miners are not incentivized to include transactions in block. This ZIP navigates this problem by ensuring miners continue to receive direct rewards for including transactions, while still contributing to the ZSF.</p>
<p>Implementing this change allows the ZSF to accrue value earlier. By ensuring a consistent source of funding, the ZSF contributes to bolstering the Zcash network’s long-term security and sustainability.</p>
<h1>Motivation</h1>
<p>While ZIP-XXX (Establishing the Zcash Sustainability Fund) describes a method by which funds can be added to the Zcash Sustainability Fund by a voluntary <code>ZSF_DEPOSIT</code> transaction field. The default value of this field is zero and it is left up to the app, wallet, and mining software implementers to make use of it.</p>
<p>This ZIP takes a much more explicit and non-optional approach, mandating at the protocol level that 60% of transaction fees be deposited into the ZSF. As noted above, implementing this change allows the ZSF to accrue value earlier and contribute to future network sustainability.</p>
<p>If ZIPs ### and ### are accepted, the system looks something like this:</p>
<p>At Every New Block:
- <code>ZSF_DEPOSIT</code> amount is deposited into the ZSF
- Block rewards come from the ZSF
- Transaction fees (inputs - outputs) paid to miner</p>
<p>After the features described in this ZIP are activated (changed parts in bold):</p>
<p>At Every New Block:
- <code>ZSF_DEPOSIT</code> amount is deposited into the ZSF
- Block rewards come from the ZSF
- <strong>40% of transaction fees (inputs - outputs) paid to miner</strong>
- <strong>60% of transaction fees (inputs - outputs) deposited into the ZSF</strong></p>
<p>This has a multitude of benefits:</p>
<ol>
<li><strong>Network Sustainability</strong>: This mechanism involves temporarily reducing the supply of ZEC similar to asset burning in Ethereum’s EIP-1559, but with potential long-term sustainability benefits as the redistribution of deposits contributes to issuance rewards and network development, making it an attractive option for current and future Zcash users.</li>
<li><strong>Ecosystem Benefits of Longer Time Horizons</strong>: A reliable and long-term functioning Zcash blockchain allows users to make secure long-term plans, leading to a sustainable and virtuous adoption cycle, rather than being influenced by short-term trends.</li>
<li><strong>Incentivizing Transaction Inclusion</strong>: By providing a 40% share of transaction fees to miners, this ZIP maintains incentives for miners to prioritize including transactions in their blocks. This helps ensure the efficient processing of transactions and supports a robust and responsive network.</li>
<li><strong>Future-Proofing the Network</strong>: Diverting transaction fees into the ZSF is a forward-looking approach that prepares the Zcash network for future challenges and opportunities. It establishes a financial buffer that can be instrumental in addressing unforeseen issues and seizing strategic advantages as the Zcash ecosystem evolves.</li>
</ol>
<h1>Specification</h1>
<p>This ZIP only proposes a single modification to the transaction fees:
1. Keep the current destination of 40% of the fees untouched, but route 60% of the fees back to the ZSF</p>
<h2>Transaction fee routing requirements</h2>
<ul>
<li>For each transaction, 60% of the total fee MUST be paid to the ZSF</li>
<li>Any fractions are rounded in favour of the miner</li>
</ul>
<h3>Consensus Rule Changes</h3>
<p>The coinbase transaction at block height <code>height</code> MUST have a <code>zsfDeposit</code> that is greater than or equal to <code>floor((TransactionFees(height) * 6) / 10)</code>, where <code>TransactionFees(height)</code> is the sum of the the remaining value in the transparent transaction value pool of the non-coinbase transactions in the block at <code>height</code>.</p>
<p>TODO ZIP Editors:
- work out how to deal with pre-v6 transactions which don't have the zsfDeposit() field. For example, by requiring the remaining value in the transparent transaction value pool of a coinbase transaction to be greater than or equal to 60% of the fee
- consider imposing this requirement on v6 transactions instead of an explicit <code>ZSF_DEPOSIT</code> field requirement</p>
<h1>Rationale</h1>
<p>We believe that is ultimately a very minor change to the protocol, and quite simple in terms of implementation overhead. Additionally – and at the time of this writing – transaction fees are so small that 60% will likely not have a major impact.</p>
<p>If transaction fees were to increase, future ZIPs can be written to change the 60%/40% split. Finding the optimal fee split may require an iterative approach involving adjustments based on real-world data and network dynamics. However, before the issuance reaches 0, these kinds of 0-issuance security issues are much less severe.</p>
<p>In the future, other ZIPs may be written to fund the ZSF in various ways, including but not limited to:
- ZSA fees
- dApp-specific fees and donations
- “Storage fees” for any future data availability
- Cross-chain bridge usage / Cross-chain messaging
- Note sorting micro-transactional fees</p>
<h2>Future Implications</h2>
<p>Looking into the future, there may come a time when the transaction fees become greater than the block reward issuance. At that time we may need to reconsider the 60/40 split. However, this will likely not be the case for the next 8-10 years due to forcasts based on issuance models and network traffic.</p>
<h1>References</h1>
<p>[1] RFC-2119: https://datatracker.ietf.org/doc/html/rfc2119</p>
<p>[2] ZIP 200: https://zips.z.cash/zip-0200</p>
<p>[3] ZIP TBD: The Zcash Sustainability Fund ZIP (Placeholder)</p>